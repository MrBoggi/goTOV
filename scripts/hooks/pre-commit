#!/bin/sh

echo "ğŸ” Running pre-commit checks..."

# 1. gofmt
echo "â–¶ Checking gofmt..."
unformatted=$(gofmt -l .)
if [ -n "$unformatted" ]; then
    echo "âŒ Unformatted files:"
    echo "$unformatted"
    exit 1
fi

# 2. golangci-lint
echo "â–¶ Running golangci-lint..."
if ! golangci-lint run; then
    echo "âŒ golangci-lint reported issues"
    exit 1
fi

# 3. go vet
echo "â–¶ Running go vet..."
if ! go vet ./...; then
    echo "âŒ go vet failed"
    exit 1
fi

echo "âœ… Pre-commit checks passed."
exit 0
